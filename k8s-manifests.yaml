apiVersion: v1
kind: PersistentVolume
metadata:
  name: kafka-pv
spec:
  capacity:
    storage: 5Gi
  accessModes:
    - ReadWriteOnce
  hostPath:
    path: /mnt/data/kafka
    type: DirectoryOrCreate
  persistentVolumeReclaimPolicy: Retain
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: kafka-data
  namespace: default
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 1Gi
# ---
# apiVersion: apps/v1
# kind: Deployment
# metadata:
#   name: frontend
#   namespace: default
# spec:
#   replicas: 1
#   selector:
#     matchLabels:
#       app: frontend
#   template:
#     metadata:
#       labels:
#         app: frontend
#     spec:
#       containers:
#         - name: frontend
#           image: rohanakode490/fc-frontend:latest
#           ports:
#             - containerPort: 3000
#           env:
#             - name: NEXT_PUBLIC_API_URL
#               value: "http://primary-backend"
#             - name: NEXT_PUBLIC_EXTERNAL_API_URL
#               value: "https://fcpb.rohanakode.dev"
#           livenessProbe:
#             httpGet:
#               path: /
#               port: 3000
#             initialDelaySeconds: 30
#             periodSeconds: 10
#             failureThreshold: 3
#           readinessProbe:
#             httpGet:
#               path: /
#               port: 3000
#             initialDelaySeconds: 10
#             periodSeconds: 5
#             failureThreshold: 3
#           resources:
#             requests:
#               cpu: "100m"
#               memory: "256Mi"
#             limits:
#               cpu: "300m"
#               memory: "512Mi"
# ---
# apiVersion: v1
# kind: Service
# metadata:
#   name: frontend
#   namespace: default
# spec:
#   selector:
#     app: frontend
#   ports:
#     - port: 80
#       targetPort: 3000
#       nodePort: 30080
#   type: LoadBalancer
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: primary-backend
  namespace: default
spec:
  replicas: 1
  selector:
    matchLabels:
      app: primary-backend
  template:
    metadata:
      labels:
        app: primary-backend
    spec:
      containers:
        - name: primary-backend
          image: rohanakode490/fc-primary-backend:latest
          ports:
            - containerPort: 4000
          env:
            - name: DATABASE_URL
              valueFrom:
                secretKeyRef:
                  name: app-secrets
                  key: DATABASE_URL
            - name: FRONTEND_URL
              value: "https://fc.rohanakode.dev"
            - name: REDIS_URL
              valueFrom:
                secretKeyRef:
                  name: app-secrets
                  key: REDIS_URL
            - name: JWT_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: app-secrets
                  key: JWT_PASSWORD
            - name: SESSION_SECRET
              valueFrom:
                secretKeyRef:
                  name: app-secrets
                  key: SESSION_SECRET
            - name: GOOGLE_CLIENT_ID
              valueFrom:
                secretKeyRef:
                  name: app-secrets
                  key: GOOGLE_CLIENT_ID
            - name: GOOGLE_CLIENT_SECRET
              valueFrom:
                secretKeyRef:
                  name: app-secrets
                  key: GOOGLE_CLIENT_SECRET
            - name: GITHUB_CLIENT_ID
              valueFrom:
                secretKeyRef:
                  name: app-secrets
                  key: GITHUB_CLIENT_ID
            - name: GITHUB_CLIENT_SECRET
              valueFrom:
                secretKeyRef:
                  name: app-secrets
                  key: GITHUB_CLIENT_SECRET
            - name: TOGETHER_API_KEY
              valueFrom:
                secretKeyRef:
                  name: app-secrets
                  key: TOGETHER_API_KEY
          livenessProbe:
            httpGet:
              path: /health
              port: 4000
            initialDelaySeconds: 30
            periodSeconds: 10
            failureThreshold: 3
          readinessProbe:
            httpGet:
              path: /health
              port: 4000
            initialDelaySeconds: 10
            periodSeconds: 5
            failureThreshold: 3
          resources:
            requests:
              cpu: "50m"
              memory: "128Mi"
            limits:
              cpu: "200m"
              memory: "256Mi"
---
apiVersion: v1
kind: Service
metadata:
  name: primary-backend
  namespace: default
spec:
  selector:
    app: primary-backend
  ports:
    - port: 80
      targetPort: 4000
      nodePort: 32130
  type: LoadBalancer
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: hooks
  namespace: default
spec:
  replicas: 1
  selector:
    matchLabels:
      app: hooks
  template:
    metadata:
      labels:
        app: hooks
    spec:
      containers:
        - name: hooks
          image: rohanakode490/fc-hooks:latest
          ports:
            - containerPort: 5000
          env:
            - name: DATABASE_URL
              valueFrom:
                secretKeyRef:
                  name: app-secrets
                  key: DATABASE_URL
            - name: LINKEDIN
              valueFrom:
                secretKeyRef:
                  name: app-secrets
                  key: LINKEDIN
          livenessProbe:
            httpGet:
              path: /health
              port: 5000
            initialDelaySeconds: 30
            periodSeconds: 10
            failureThreshold: 3
          readinessProbe:
            httpGet:
              path: /health
              port: 5000
            initialDelaySeconds: 10
            periodSeconds: 5
            failureThreshold: 3
          resources:
            requests:
              cpu: "50m"
              memory: "128Mi"
            limits:
              cpu: "200m"
              memory: "256Mi"
---
apiVersion: v1
kind: Service
metadata:
  name: hooks
  namespace: default
spec:
  selector:
    app: hooks
  ports:
    - port: 80
      targetPort: 5000
      nodePort: 31294
  type: LoadBalancer
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: processor
  namespace: default
spec:
  replicas: 1
  selector:
    matchLabels:
      app: processor
  template:
    metadata:
      labels:
        app: processor
    spec:
      containers:
        - name: processor
          image: rohanakode490/fc-processor:latest
          env:
            - name: DATABASE_URL
              valueFrom:
                secretKeyRef:
                  name: app-secrets
                  key: DATABASE_URL
            - name: KAFKA_BROKERS
              value: "kafka-service.default.svc.cluster.local:9092"
          livenessProbe:
            exec:
              command:
                - sh
                - -c
                - "ps aux | grep 'node' | grep -v grep"
            initialDelaySeconds: 60
            periodSeconds: 30
            failureThreshold: 3
          resources:
            requests:
              cpu: "50m"
              memory: "128Mi"
            limits:
              cpu: "200m"
              memory: "256Mi"
---
apiVersion: v1
kind: Service
metadata:
  name: processor
  namespace: default
spec:
  selector:
    app: processor
  ports:
    - port: 80
      targetPort: 6000
  type: ClusterIP
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: worker
  namespace: default
spec:
  replicas: 1
  selector:
    matchLabels:
      app: worker
  template:
    metadata:
      labels:
        app: worker
    spec:
      containers:
        - name: worker
          image: rohanakode490/fc-worker:latest
          env:
            - name: DATABASE_URL
              valueFrom:
                secretKeyRef:
                  name: app-secrets
                  key: DATABASE_URL
            - name: KAFKA_BROKERS
              value: "kafka-service.default.svc.cluster.local:9092"
            - name: RESEND_API_KEY
              valueFrom:
                secretKeyRef:
                  name: app-secrets
                  key: RESEND_API_KEY
            - name: SOLANA_PRIVATE_KEY
              valueFrom:
                secretKeyRef:
                  name: app-secrets
                  key: SOLANA_PRIVATE_KEY
            - name: GOOGLE_CLIENT_ID
              valueFrom:
                secretKeyRef:
                  name: app-secrets
                  key: GOOGLE_CLIENT_ID
            - name: GOOGLE_CLIENT_SECRET
              valueFrom:
                secretKeyRef:
                  name: app-secrets
                  key: GOOGLE_CLIENT_SECRET
          livenessProbe:
            exec:
              command:
                - sh
                - -c
                - "ps aux | grep 'node' | grep -v grep"
            initialDelaySeconds: 60
            periodSeconds: 30
            failureThreshold: 3
          resources:
            requests:
              cpu: "100m"
              memory: "256Mi"
            limits:
              cpu: "300m"
              memory: "1024Mi"
---
apiVersion: v1
kind: Service
metadata:
  name: worker
  namespace: default
spec:
  selector:
    app: worker
  ports:
    - port: 80
      targetPort: 7000
  type: ClusterIP
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: redis
  namespace: default
spec:
  replicas: 1
  selector:
    matchLabels:
      app: redis
  template:
    metadata:
      labels:
        app: redis
    spec:
      containers:
        - name: redis
          image: redis:7-alpine
          ports:
            - containerPort: 6379
          livenessProbe:
            tcpSocket:
              port: 6379
            initialDelaySeconds: 30
            periodSeconds: 10
            failureThreshold: 3
          readinessProbe:
            tcpSocket:
              port: 6379
            initialDelaySeconds: 5
            periodSeconds: 5
            failureThreshold: 3
          resources:
            requests:
              cpu: "50m"
              memory: "64Mi"
            limits:
              cpu: "100m"
              memory: "128Mi"
---
apiVersion: v1
kind: Service
metadata:
  name: redis
  namespace: default
spec:
  selector:
    app: redis
  ports:
    - port: 6379
      targetPort: 6379
  type: ClusterIP
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: zookeeper
  namespace: default
spec:
  replicas: 1
  selector:
    matchLabels:
      app: zookeeper
  template:
    metadata:
      labels:
        app: zookeeper
    spec:
      containers:
        - name: zookeeper
          image: confluentinc/cp-zookeeper:7.5.0
          ports:
            - containerPort: 2181
          env:
            - name: ZOOKEEPER_CLIENT_PORT
              value: "2181"
            - name: ZOOKEEPER_TICK_TIME
              value: "2000"
            - name: ZOOKEEPER_SERVER_ID
              value: "1"
          livenessProbe:
            tcpSocket:
              port: 2181
            initialDelaySeconds: 30
            periodSeconds: 10
            failureThreshold: 3
          readinessProbe:
            tcpSocket:
              port: 2181
            initialDelaySeconds: 10
            periodSeconds: 5
            failureThreshold: 3
          resources:
            requests:
              cpu: "50m"
              memory: "128Mi"
            limits:
              cpu: "200m"
              memory: "256Mi"
---
apiVersion: v1
kind: Service
metadata:
  name: zookeeper
  namespace: default
spec:
  selector:
    app: zookeeper
  ports:
    - port: 2181
      targetPort: 2181
  type: ClusterIP
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: kafka
  namespace: default
spec:
  replicas: 1
  selector:
    matchLabels:
      app: kafka
  template:
    metadata:
      labels:
        app: kafka
    spec:
      containers:
        - name: kafka
          image: confluentinc/cp-kafka:7.5.0
          ports:
            - containerPort: 9092
          env:
            - name: KAFKA_BROKER_ID
              value: "1"
            - name: KAFKA_ZOOKEEPER_CONNECT
              value: "zookeeper.default.svc.cluster.local:2181"
            - name: KAFKA_LISTENERS
              value: "PLAINTEXT://0.0.0.0:9092"
            - name: KAFKA_ADVERTISED_LISTENERS
              value: "PLAINTEXT://kafka-service.default.svc.cluster.local:9092"
            - name: KAFKA_LISTENER_SECURITY_PROTOCOL_MAP
              value: "PLAINTEXT:PLAINTEXT"
            - name: KAFKA_INTER_BROKER_LISTENER_NAME
              value: "PLAINTEXT"
            - name: KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR
              value: "1"
            - name: KAFKA_AUTO_CREATE_TOPICS_ENABLE
              value: "true"
            - name: KAFKA_LOG_DIRS
              value: "/var/lib/kafka/data"
          volumeMounts:
            - name: kafka-storage
              mountPath: /var/lib/kafka/data
          livenessProbe:
            tcpSocket:
              port: 9092
            initialDelaySeconds: 60
            periodSeconds: 10
            failureThreshold: 5
          readinessProbe:
            tcpSocket:
              port: 9092
            initialDelaySeconds: 40
            periodSeconds: 5
            failureThreshold: 5
          resources:
            requests:
              cpu: "100m"
              memory: "256Mi"
            limits:
              cpu: "500m"
              memory: "512Mi"
      volumes:
        - name: kafka-storage
          persistentVolumeClaim:
            claimName: kafka-data
---
apiVersion: v1
kind: Service
metadata:
  name: kafka-service
  namespace: default
spec:
  selector:
    app: kafka
  ports:
    - port: 9092
      targetPort: 9092
  type: ClusterIP
# apiVersion: v1
# kind: PersistentVolume
# metadata:
#   name: kafka-pv
# spec:
#   capacity:
#     storage: 5Gi
#   accessModes:
#     - ReadWriteOnce
#   hostPath:
#     path: /mnt/data/kafka # make sure this dir exists on the VM
#     type: DirectoryOrCreate
#   persistentVolumeReclaimPolicy: Retain
# ---
# apiVersion: v1
# kind: PersistentVolumeClaim
# metadata:
#   name: kafka-data
#   namespace: default
# spec:
#   accessModes:
#     - ReadWriteOnce
#   resources:
#     requests:
#       storage: 1Gi
# ---
# # apiVersion: apps/v1
# # kind: Deployment
# # metadata:
# #   name: frontend
# #   namespace: default
# # spec:
# #   replicas: 1
# #   selector:
# #     matchLabels:
# #       app: frontend
# #   template:
# #     metadata:
# #       labels:
# #         app: frontend
# #     spec:
# #       containers:
# #         - name: frontend
# #           image: rohanakode490/fc-frontend:latest
# #           ports:
# #             - containerPort: 3000
# #           env:
# #             - name: NEXT_PUBLIC_JWT_PASSWORD
# #               valueFrom:
# #                 secretKeyRef:
# #                   name: app-secrets
# #                   key: NEXT_PUBLIC_JWT_PASSWORD
# #             - name: NEXT_PUBLIC_BACKEND_URL
# #               valueFrom:
# #                 secretKeyRef:
# #                   name: app-secrets
# #                   key: NEXT_PUBLIC_BACKEND_URL
# #             - name: NEXT_PUBLIC_HOOKS_URL
# #               valueFrom:
# #                 secretKeyRef:
# #                   name: app-secrets
# #                   key: NEXT_PUBLIC_HOOKS_URL
# #             - name: NEXT_PUBLIC_GOOGLE_CLIENT_ID
# #               valueFrom:
# #                 secretKeyRef:
# #                   name: app-secrets
# #                   key: NEXT_PUBLIC_GOOGLE_CLIENT_ID
# #           resources:
# #             requests:
# #               cpu: "50m"
# #               memory: "256Mi"
# #             limits:
# #               cpu: "200m"
# #               memory: "512Mi"
# # ---
# # apiVersion: v1
# # kind: Service
# # metadata:
# #   name: frontend
# #   namespace: default
# # spec:
# #   selector:
# #     app: frontend
# #   ports:
# #     - port: 80
# #       targetPort: 3000
# #       nodePort: 30080
# #   type: LoadBalancer
# ---
# apiVersion: apps/v1
# kind: Deployment
# metadata:
#   name: primary-backend
#   namespace: default
# spec:
#   replicas: 1
#   selector:
#     matchLabels:
#       app: primary-backend
#   template:
#     metadata:
#       labels:
#         app: primary-backend
#     spec:
#       containers:
#         - name: primary-backend
#           image: rohanakode490/fc-primary-backend:latest
#           ports:
#             - containerPort: 4000
#           env:
#             - name: DATABASE_URL
#               valueFrom:
#                 secretKeyRef:
#                   name: app-secrets
#                   key: DATABASE_URL
#             - name: FRONTEND_URL
#               valueFrom:
#                 secretKeyRef:
#                   name: app-secrets
#                   key: FRONTEND_URL
#             - name: REDIS_URL
#               valueFrom:
#                 secretKeyRef:
#                   name: app-secrets
#                   key: REDIS_URL
#             - name: JWT_PASSWORD
#               valueFrom:
#                 secretKeyRef:
#                   name: app-secrets
#                   key: JWT_PASSWORD
#             - name: SESSION_SECRET
#               valueFrom:
#                 secretKeyRef:
#                   name: app-secrets
#                   key: SESSION_SECRET
#             - name: GOOGLE_CLIENT_ID
#               valueFrom:
#                 secretKeyRef:
#                   name: app-secrets
#                   key: GOOGLE_CLIENT_ID
#             - name: GOOGLE_CLIENT_SECRET
#               valueFrom:
#                 secretKeyRef:
#                   name: app-secrets
#                   key: GOOGLE_CLIENT_SECRET
#             - name: GITHUB_CLIENT_ID
#               valueFrom:
#                 secretKeyRef:
#                   name: app-secrets
#                   key: GITHUB_CLIENT_ID
#             - name: GITHUB_CLIENT_SECRET
#               valueFrom:
#                 secretKeyRef:
#                   name: app-secrets
#                   key: GITHUB_CLIENT_SECRET
#             - name: TOGETHER_API_KEY
#               valueFrom:
#                 secretKeyRef:
#                   name: app-secrets
#                   key: TOGETHER_API_KEY
#           resources:
#             requests:
#               cpu: "50m"
#               memory: "128Mi"
#             limits:
#               cpu: "200m"
#               memory: "256Mi"
# ---
# apiVersion: v1
# kind: Service
# metadata:
#   name: primary-backend
#   namespace: default
# spec:
#   selector:
#     app: primary-backend
#   ports:
#     - port: 80
#       targetPort: 4000
#       nodePort: 32130
#   type: LoadBalancer
# ---
# apiVersion: apps/v1
# kind: Deployment
# metadata:
#   name: hooks
#   namespace: default
# spec:
#   replicas: 1
#   selector:
#     matchLabels:
#       app: hooks
#   template:
#     metadata:
#       labels:
#         app: hooks
#     spec:
#       containers:
#         - name: hooks
#           image: rohanakode490/fc-hooks:latest
#           ports:
#             - containerPort: 5000
#           env:
#             - name: DATABASE_URL
#               valueFrom:
#                 secretKeyRef:
#                   name: app-secrets
#                   key: DATABASE_URL
#             - name: LINKEDIN
#               valueFrom:
#                 secretKeyRef:
#                   name: app-secrets
#                   key: LINKEDIN
#           resources:
#             requests:
#               cpu: "50m"
#               memory: "128Mi"
#             limits:
#               cpu: "200m"
#               memory: "256Mi"
# ---
# apiVersion: v1
# kind: Service
# metadata:
#   name: hooks
#   namespace: default
# spec:
#   selector:
#     app: hooks
#   ports:
#     - port: 80
#       targetPort: 5000
#       nodePort: 31294
#   type: LoadBalancer
# ---
# apiVersion: apps/v1
# kind: Deployment
# metadata:
#   name: processor
#   namespace: default
# spec:
#   replicas: 1
#   selector:
#     matchLabels:
#       app: processor
#   template:
#     metadata:
#       labels:
#         app: processor
#     spec:
#       containers:
#         - name: processor
#           image: rohanakode490/fc-processor:latest
#           env:
#             - name: DATABASE_URL
#               valueFrom:
#                 secretKeyRef:
#                   name: app-secrets
#                   key: DATABASE_URL
#             - name: KAFKA_BROKERS
#               value: "kafka-service.default.svc.cluster.local:9092"
#           resources:
#             requests:
#               cpu: "50m"
#               memory: "128Mi"
#             limits:
#               cpu: "200m"
#               memory: "256Mi"
# ---
# apiVersion: v1
# kind: Service
# metadata:
#   name: processor
#   namespace: default
# spec:
#   selector:
#     app: processor
#   ports:
#     - port: 80
#       targetPort: 6000
#   type: ClusterIP
# ---
# apiVersion: apps/v1
# kind: Deployment
# metadata:
#   name: worker
#   namespace: default
# spec:
#   replicas: 1
#   selector:
#     matchLabels:
#       app: worker
#   template:
#     metadata:
#       labels:
#         app: worker
#     spec:
#       containers:
#         - name: worker
#           image: rohanakode490/fc-worker:latest
#           env:
#             - name: DATABASE_URL
#               valueFrom:
#                 secretKeyRef:
#                   name: app-secrets
#                   key: DATABASE_URL
#             - name: KAFKA_BROKER
#               value: "kafka-service.default.svc.cluster.local:9092"
#             - name: RESEND_API_KEY
#               valueFrom:
#                 secretKeyRef:
#                   name: app-secrets
#                   key: RESEND_API_KEY
#             - name: SOLANA_PRIVATE_KEY
#               valueFrom:
#                 secretKeyRef:
#                   name: app-secrets
#                   key: SOLANA_PRIVATE_KEY
#             - name: GOOGLE_CLIENT_ID
#               valueFrom:
#                 secretKeyRef:
#                   name: app-secrets
#                   key: GOOGLE_CLIENT_ID
#             - name: GOOGLE_CLIENT_SECRET
#               valueFrom:
#                 secretKeyRef:
#                   name: app-secrets
#                   key: GOOGLE_CLIENT_SECRET
#           resources:
#             requests:
#               cpu: "100m"
#               memory: "256Mi"
#             limits:
#               cpu: "300m"
#               memory: "1024Mi"
# ---
# apiVersion: v1
# kind: Service
# metadata:
#   name: worker
#   namespace: default
# spec:
#   selector:
#     app: worker
#   ports:
#     - port: 80
#       targetPort: 7000
#   type: ClusterIP
# ---
# apiVersion: apps/v1
# kind: Deployment
# metadata:
#   name: redis
#   namespace: default
# spec:
#   replicas: 1
#   selector:
#     matchLabels:
#       app: redis
#   template:
#     metadata:
#       labels:
#         app: redis
#     spec:
#       containers:
#         - name: redis
#           image: redis:7-alpine
#           ports:
#             - containerPort: 6379
#           resources:
#             requests:
#               cpu: "50m"
#               memory: "64Mi"
#             limits:
#               cpu: "100m"
#               memory: "128Mi"
# ---
# apiVersion: v1
# kind: Service
# metadata:
#   name: redis
#   namespace: default
# spec:
#   selector:
#     app: redis
#   ports:
#     - port: 6379
#       targetPort: 6379
#   type: ClusterIP
# ---
# # Zookeeper Deployment
# apiVersion: apps/v1
# kind: Deployment
# metadata:
#   name: zookeeper
#   namespace: default
# spec:
#   replicas: 1
#   selector:
#     matchLabels:
#       app: zookeeper
#   template:
#     metadata:
#       labels:
#         app: zookeeper
#     spec:
#       containers:
#         - name: zookeeper
#           image: confluentinc/cp-zookeeper:7.5.0
#           ports:
#             - containerPort: 2181
#           env:
#             - name: ZOOKEEPER_CLIENT_PORT
#               value: "2181"
#             - name: ZOOKEEPER_TICK_TIME
#               value: "2000"
#             - name: ZOOKEEPER_SERVER_ID
#               value: "1"
#           resources:
#             requests:
#               cpu: "50m"
#               memory: "128Mi"
#             limits:
#               cpu: "200m"
#               memory: "256Mi"
# ---
# apiVersion: v1
# kind: Service
# metadata:
#   name: zookeeper
#   namespace: default
# spec:
#   selector:
#     app: zookeeper
#   ports:
#     - port: 2181
#       targetPort: 2181
#   type: ClusterIP
# ---
# # Kafka Deployment
# apiVersion: apps/v1
# kind: Deployment
# metadata:
#   name: kafka
#   namespace: default
# spec:
#   replicas: 1
#   selector:
#     matchLabels:
#       app: kafka
#   template:
#     metadata:
#       labels:
#         app: kafka
#     spec:
#       containers:
#         - name: kafka
#           image: confluentinc/cp-kafka:7.5.0
#           ports:
#             - containerPort: 9092
#           env:
#             - name: KAFKA_BROKER_ID
#               value: "1"
#             - name: KAFKA_ZOOKEEPER_CONNECT
#               value: "zookeeper.default.svc.cluster.local:2181"
#             - name: KAFKA_LISTENERS
#               value: "PLAINTEXT://0.0.0.0:9092"
#             - name: KAFKA_ADVERTISED_LISTENERS
#               value: "PLAINTEXT://kafka-service.default.svc.cluster.local:9092"
#             - name: KAFKA_LISTENER_SECURITY_PROTOCOL_MAP
#               value: "PLAINTEXT:PLAINTEXT"
#             - name: KAFKA_INTER_BROKER_LISTENER_NAME
#               value: "PLAINTEXT"
#             - name: KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR
#               value: "1"
#             - name: KAFKA_AUTO_CREATE_TOPICS_ENABLE
#               value: "true"
#             - name: KAFKA_LOG_DIRS
#               value: "/var/lib/kafka/data"
#           volumeMounts:
#             - name: kafka-storage
#               mountPath: /var/lib/kafka/data
#           resources:
#             requests:
#               cpu: "100m"
#               memory: "256Mi"
#             limits:
#               cpu: "500m"
#               memory: "512Mi"
#       volumes:
#         - name: kafka-storage
#           persistentVolumeClaim:
#             claimName: kafka-data
# ---
# apiVersion: v1
# kind: Service
# metadata:
#   name: kafka-service
#   namespace: default
# spec:
#   selector:
#     app: kafka
#   ports:
#     - port: 9092
#       targetPort: 9092
#   type: ClusterIP
